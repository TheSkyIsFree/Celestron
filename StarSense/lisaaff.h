#ifndef __SKYAFF_H__
#define __SKYAFF_H__

//==============================================================================================================================
// standard header includes
//==============================================================================================================================
#include <string.h>                                             // std string and memory operations
#include <math.h>                                               // std math operations
#include "DmTypes.hpp"                                            // platform type and hardware specific definitions
#include "lisasolve.h"                                          // module specific includes



//******************************************************************************************************************************
//******                                         global defines and typedefs                                            ********
//******************************************************************************************************************************



//******************************************************************************************************************************
//******                                     exports of variables and functions                                         ********
//******************************************************************************************************************************

//==============================================================================================================================
// VAR:  
//==============================================================================================================================
// DESC: 
//==============================================================================================================================



//==============================================================================================================================
// FUNC: LisaAff_AffToGeo()                                                                                                      
//==============================================================================================================================
// DESC:                                                                                                                        
//==============================================================================================================================
extern LisaGeoTransformTy LisaAff_AffToGeo(
  LisaAffTransformTy
    Aff
);



//==============================================================================================================================
// FUNC: LisaAff_Fit()                                                                                                           
//==============================================================================================================================
// DESC: using the first NumMatch star matches in MatchList(), this routine calculates the LSF to the Affine transformation that
//       transforms StarList1 coordinates into StarList2 coordinates. Star MatchList(j) is used only if MatchList(j).Used is    
//       true the error vector DistError() contains the distance matching error in StarList1 coords, for each star the routine  
//       returns the RMS fit error in StarList2 coords                                                                          
//==============================================================================================================================
extern double LisaAff_Fit(
  LisaStarTy
    *StarList1,
  LisaStarTy
    *StarList2,
  LisaMatchListTy
    *MatchList,
  int
    NumMatch,
  LisaAffTransformTy
    *Aff,
  double
    *DistError
);



//==============================================================================================================================
// FUNC: LisaAff_Transform()                                                                                                     
//==============================================================================================================================
// DESC:                                                                                                                        
//==============================================================================================================================
extern void LisaAff_Transform(
  LisaAffTransformTy
    Aff,
  double
    X,
  double
    Y,
  double
    *U,
  double
    *V
);



//==============================================================================================================================
// FUNC: LisaAff_TransformInv()                                                                                                  
//==============================================================================================================================
// DESC:                                                                                                                        
//==============================================================================================================================
extern void LisaAff_TransformInv(
  LisaAffTransformTy
    Aff,
  double
    U,
  double
    V,
  double
    *X,
  double
    *Y
);



#ifdef __SKYAFF_C__
//******************************************************************************************************************************
//******                                         local subsystem definitions                                            ********
//******************************************************************************************************************************

//==============================================================================================================================
// external header requirments for this module
//==============================================================================================================================



//==============================================================================================================================
// subsystem typedefs and defines
//==============================================================================================================================

//==============================================================================================================================
// subsystem static function prototypes
//==============================================================================================================================



#endif //#ifdef __SKYAFF_C__

#endif //#ifndef __SKYAFF_H__
