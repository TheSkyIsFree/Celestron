#ifndef __LISA_H__
#define __LISA_H__

//==============================================================================================================================
// standard header includes
//==============================================================================================================================
// Use this for non-SkySafari
//#include "type.h"                                            // platform type and hardware specific definitions
// Use this for SkySafari
#include "DmTypes.hpp"                                      // platform type and hardware specific definitions
#include <stdio.h>

//******************************************************************************************************************************
//******                                         global defines and typedefs                                            ********
//******************************************************************************************************************************



//******************************************************************************************************************************
//******                                     exports of variables and functions                                         ********
//******************************************************************************************************************************
#ifdef __cplusplus
extern "C" {
#endif
//==============================================================================================================================
// VAR:  (OS_SEM) LisaSolveSEM
//==============================================================================================================================
// DESC: signals to LISA task to start solve operation
//==============================================================================================================================
//extern OS_SEM
//  LisaSolveSEM;



//==============================================================================================================================
// VAR:  LisaHaveSolutionB
//==============================================================================================================================
// DESC: flags that a LISA solution was found
//==============================================================================================================================
extern volatile BOOL_D
  LisaHaveSolutionB,
  LisaAbortSolveB;



//==============================================================================================================================
// FUNC: Lisa_SphericalProject()
//==============================================================================================================================
// DESC: use LISA to project Ra, Dec to x,y coords
//==============================================================================================================================
extern void Lisa_SphericalProject(                              // RETR: none
  double
    RaRad,
  double
    DecRad,
  double
    *Xcen,
  double
    *Ycen
);



//==============================================================================================================================
// FUNC: Lisa_AisSolvePlate()
//==============================================================================================================================
// DESC: sends aux command to AIS and reports the AIS status
//==============================================================================================================================
extern BOOL_D Lisa_AisSolvePlate(                               // RETR: none
  float                                                         //
    *CoordList,                                                 //
  uint32_t                                                          //
    CoordListCountUT                                            //
);



//==============================================================================================================================
// FUNC: Lisa_AisSetCenterCoords()
//==============================================================================================================================
// DESC: sents the default center coordinates for LISA
//==============================================================================================================================
extern void Lisa_AisSetCenterCoords(                            // RETR: none
  int32_t                                                          //
    CtrXRefSL,                                                  //
  int32_t                                                          //
    CtrYRefSL                                                   //
);



//==============================================================================================================================
// FUNC: Lisa_GetCenterInRads()
//==============================================================================================================================
// DESC: gets the center reference celestial coords in Rads from last plate solve
//==============================================================================================================================
extern void Lisa_GetCenterInRads(                               // RETR: none
  double                                                        //
    *RaRad,                                                     // PASS: -> recvs Ra coord
  double                                                        //
    *DecRad                                                     // PASS: -> recvs Dec coord
);


//==============================================================================================================================
// FUNC: Lisa_Init
//==============================================================================================================================
// DESC:
//==============================================================================================================================
extern BOOL_D Lisa_Init(                                          // RETR: none
  FILE
    *QuadFileP,
  const uint32_t
    QuadFileOffsetUL,
   const uint32_t
    QuadFileSizeUL,
  FILE
    *StarFileP,
  const uint32_t
    StarFileOffsetUL,
  const uint32_t
    StarFileSizeUL
);

#ifdef __cplusplus
}
#endif

#ifdef __LISA_C__
//******************************************************************************************************************************
//******                                         local subsystem definitions                                            ********
//******************************************************************************************************************************

//==============================================================================================================================
// external header requirments for this module
//==============================================================================================================================
#include <string.h>                                             // for string ops
//#include <CFBundleRef.h>
#include "lisasolve.h"                                          // interface to LISA implementation

//#include "..\Align\align.h"                                     //
//#include "..\Astro\astromath.h"                                 //
//#include "..\Aux1\aux1.h"                                       // aux bus command parser interface descriptions
//#include "..\Eeprom\eeprom.h"                                   // EEPROM interface
//#include "..\Keypad\keypad.h"                                   // keypad interface
//#include "..\Lcd\lcd.h"                                         // lcd display interface
//#include "..\Serial\serial.h"


//==============================================================================================================================
// subsystem typedefs and defines
//==============================================================================================================================



//==============================================================================================================================
// subsystem static function prototypes
//==============================================================================================================================



#endif //#ifdef __LISA_C__

#endif //#ifndef __LISA_H__
